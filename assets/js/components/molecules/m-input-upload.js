class UploadInputMolecule{constructor(t){this.inputContainer=t,this.inputElement=this.inputContainer.querySelector(".m-input-upload__upload"),this.isRequired=this.inputElement.hasAttribute("required"),this.errorElement=this.inputContainer.querySelector(".m-input-upload__error"),this.removeButton=this.inputContainer.querySelector(".m-input-upload__button"),this.fileAllow=this.inputElement.accept.split(",").map(t=>t.trim()),this.fileSizeLimit=1024*(parseInt(this.inputElement.dataset.limit??"")??10)*1024,this.inputElement?this.addEventListeners():console.error("Input element not found within the container:",this.inputContainer)}get file(){return this.inputElement.files[0]}get isInvalidFile(){if(!this.file)return!0;const t=this.file.type,i=this.file.name.split(".").pop();return!this.fileAllow.some(e=>{if(e.endsWith("/*")){const i=e.replace("/*","");return t.startsWith(i)}return this.fileAllow.includes(t)||this.fileAllow.includes(`.${i}`)})}get isInvalidSize(){if(!this.file)return!0;return this.file.size>this.fileSizeLimit}get isInvalid(){return this.isInvalidFile||this.isInvalidSize}handleFileTypeAndSize(){this.file?this.isInvalid?(this.inputContainer.classList.add("is-invalid"),this.isInvalidFile?this.errorElement.textContent=this.errorElement.dataset.format??"Invalid file type.":this.isInvalidSize&&(this.errorElement.textContent=this.errorElement.dataset.max??"File size exceeds limit.")):(this.inputContainer.classList.remove("is-invalid"),this.errorElement.textContent=""):this.inputContainer.classList.contains("is-uploaded")&&setTimeout(()=>{this.inputContainer.classList.remove("is-uploaded")},0)}addEventListeners(){this.inputElement.addEventListener("change",()=>{this.inputContainer.classList.add("is-uploading"),this.handleFileTypeAndSize(),this.inputContainer.classList.contains("is-invalid")||this.inputContainer.classList.add("is-uploaded"),this.inputContainer.classList.remove("is-uploading")}),this.removeButton&&this.removeButton.addEventListener("click",()=>{this.inputElement.value="",this.inputContainer.classList.remove("is-uploading","is-uploaded","is-invalid"),this.errorElement.textContent=""})}}const initializeFormUploadInput=()=>{document.querySelectorAll(".m-input-upload").forEach(t=>{t.uploadInputMoleculeInstant=new UploadInputMolecule(t)})};initializeFormUploadInput();