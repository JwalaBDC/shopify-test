export default class ImageReveal{constructor({element:e}){this.container=e,this.wrappers=this.container.querySelectorAll("[data-image-reveal-motion-element='image-wrapper']"),this.imgs=this.container.querySelectorAll("[data-image-reveal-motion-element='image']"),this.persist=!0,this.container.hasAttribute("data-image-reveal-motion-persist")&&"false"===this.container.getAttribute("data-image-reveal-motion-persist")&&(this.persist=!1),this.init(),this.animateOut(),this.addEventListeners(),gsap.registerPlugin(CustomEase),CustomEase.create("emphasized-decelerate","0.05, 0.7, 0.1, 1")}init(){}animateIn(){if(this.isAnimatedIn)return;this.isAnimatedIn=!0;const e=gsap.timeline();e.fromTo(this.wrappers,{opacity:0,clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",webkitClipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)"},{opacity:1,clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",webkitClipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:.6,ease:"emphasized-decelerate",overwrite:!0},0),e.fromTo(this.imgs,{opacity:0,scale:1.2},{opacity:1,scale:1,duration:.6,ease:"emphasized-decelerate",overwrite:!0},0)}animateOut(){this.isAnimatedIn&&this.persist?this.container.dispatchEvent(new CustomEvent("unobserve")):(this.isAnimatedIn=!1,gsap.set(this.wrappers,{opacity:0,clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",webkitClipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)"}),gsap.set(this.imgs,{opacity:0,scale:1.2}))}retriggerAnimation(){this.isAnimatedIn=!1,this.animateOut(),this.animateIn()}addEventListeners(){const e=this.container.querySelectorAll("[data-image-reveal-motion-retrigger-button]");for(const t of e)t.addEventListener("click",this.retriggerAnimation.bind(this))}}