export default class SectionalBanner{constructor({element:e}){this.container=e,this.bannerImageWrapper=this.container.querySelector("[data-sectional-banner-motion-element='image-wrapper']"),this.isAnimatedIn=!1,this.resizeTimer=!1,this.windowHeight=window.innerHeight,this.scrollY=window.scrollY,this.easedScale=1,this.addEventListeners(),this.setOffsets(),requestAnimationFrame(this.tick.bind(this)),this.animateOut()}animateIn(){this.isAnimatedIn||(this.isAnimatedIn=!0,this.container.classList.add("is-visible-in-viewport"))}animateOut(){this.isAnimatedIn=!1}setOffsets(){this.elementTop=this.container.getBoundingClientRect().top+window.scrollY}updateScroll(e){this.scrollY=e}onResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.windowHeight=window.innerHeight},100)}tick(){requestAnimationFrame(this.tick.bind(this));const e=this.elementTop-this.scrollY,i=gsap.utils.mapRange(0,-this.windowHeight,1,1.2,e),t=gsap.utils.clamp(1,1.2,i),s=gsap.utils.interpolate(this.easedScale,t,.5);this.easedScale=s,this.bannerImageWrapper&&gsap.set(this.bannerImageWrapper,{scale:s,transformOrigin:"top center",overwrite:!0})}addEventListeners(){window.scrollManager.subscribe(this.updateScroll.bind(this))}}