if("undefined"==typeof HsitorySliderInterface){class HsitorySliderInterface extends HTMLElement{constructor(){super(),this.cardLists=[...this.querySelectorAll("[slider-card-list]")],this.cards=[...this.querySelectorAll("[slider-card]")],this.sliderNavs=[...this.querySelectorAll("[slider-nav]")],this.prevBtns=[...this.querySelectorAll("[slider-prev]")],this.nextBtns=[...this.querySelectorAll("[slider-next]")],this.header=document.querySelector("header"),this.headerheight=parseInt(this.header&&this.header.offsetHeight||0),this.prevClickHandler=this.createPrevClickHandler(),this.nextClickHandler=this.createNextClickHandler(),this.scrollHandler=this.createScrollHandler()}reinitialize(){this.unobserveElements(this.cards),this.unobserveElements(this.cardLists),this.cardLists=[...this.querySelectorAll("[slider-card-list]")],this.cards=[...this.querySelectorAll("[slider-card]")],this.observeElements(this.cards),this.observeElements(this.cardLists)}setupCardObserver(){this.observer=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target,s=t.hasAttribute("slider-card"),r=t.hasAttribute("slider-card-list"),i=e.isIntersecting;s&&(t.setAttribute("aria-hidden",i?"false":"true"),this.setSliderBtnState()),r&&(t.classList.toggle("is-visible",i),t.scrollWidth>t.offsetWidth&&this.setSliderNavVisibility())})},{root:null,threshold:.1})}observeElements(e){for(const t of e)this.observer.observe(t)}unobserveElements(e){for(const t of e)this.observer.unobserve(t)}setSliderBtnState(){let e=this.cardLists.some(e=>{const t=e.querySelector("[slider-card]");return t&&"false"===t.getAttribute("aria-hidden")});for(const t of this.prevBtns)t.disabled=e;let t=this.cardLists.some(e=>{const t=e.querySelectorAll("[slider-card]"),s=t[t.length-1];return s&&"false"===s.getAttribute("aria-hidden")});for(const e of this.nextBtns)e.disabled=t}setSliderNavVisibility(){const e=Array.from(this.cardLists).filter(e=>e.classList.contains("is-visible")),t=0===e.length||e.some(e=>{const t=e.querySelectorAll("[slider-card]");return Array.from(t).every(e=>"false"===e.getAttribute("aria-hidden"))});for(const e of this.sliderNavs)e.hidden=t}createScrollHandler(){return e=>{const t=e.currentTarget;t.disableSliderBtnClicks=!0;for(const e of this.nextBtns)e.classList.add("is-pressed-state-blocked");for(const e of this.prevBtns)e.classList.add("is-pressed-state-blocked");clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{t.disableSliderBtnClicks=!1;for(const e of this.nextBtns)e.classList.remove("is-pressed-state-blocked");for(const e of this.prevBtns)e.classList.remove("is-pressed-state-blocked")},100)}}getCardsPerSlide(e){let t=1;return window.innerWidth>767&&(t=e.hasAttribute("data-cards-per-slide")?parseInt(e.dataset.cardsPerSlide):2),t}createNextClickHandler(){return()=>{const e=this.cardLists.find(e=>e.classList.contains("is-visible"));if(!e)return;const t=[...e.querySelectorAll("[slider-card]")],s=t.findIndex(e=>"false"===e.getAttribute("aria-hidden")),r=t[s+1];if(!e.disableSliderBtnClicks&&r){const t=this.getCardsPerSlide(e);this.scrollToCardList(e),e.scrollTo({left:r.getBoundingClientRect().width*(s+t),behavior:"smooth"})}}}createPrevClickHandler(){return()=>{const e=this.cardLists.find(e=>e.classList.contains("is-visible"));if(!e)return;const t=[...e.querySelectorAll("[slider-card]")],s=t.findIndex(e=>"false"===e.getAttribute("aria-hidden")),r=t[s-1];if(!e.disableSliderBtnClicks&&r){const t=this.getCardsPerSlide(e);this.scrollToCardList(e),e.scrollTo({left:r.getBoundingClientRect().width*(s-t),behavior:"smooth"})}}}scrollToCardList(e){let t;const s=this.getBoundingClientRect(),r=window.innerHeight,i=s.bottom-r,l=s.top-i;s.bottom>r&&l>this.headerheight&&(t=s.bottom-r),window.scrollBy({top:t,behavior:"smooth"})}connectedCallback(){this.setupCardObserver(),this.observeElements(this.cards),this.observeElements(this.cardLists);for(const e of this.cardLists)e.addEventListener("scroll",this.scrollHandler);for(const e of this.nextBtns)e.addEventListener("click",this.nextClickHandler);for(const e of this.prevBtns)e.addEventListener("click",this.prevClickHandler)}disconnectedCallback(){this.unobserveElements(this.cards),this.unobserveElements(this.cardLists);for(const e of this.cardLists)e.removeEventListener("scroll",this.scrollHandler);for(const e of this.nextBtns)e.removeEventListener("click",this.nextClickHandler);for(const e of this.prevBtns)e.removeEventListener("click",this.prevClickHandler)}}customElements.define("history-slider-interface",HsitorySliderInterface)}