class ModalInterface extends HTMLElement{constructor(){super(),this.openModalButtons=[...document.querySelectorAll("[modal-interface-open]")],this.openClickHandler=this.createOpenClickHandler(),this.closeClickHandler=this.createCloseClickHandler(),this.openModalButtons.forEach(e=>{e.setAttribute("tabindex","0"),e.setAttribute("aria-haspopup",!0),e.setAttribute("aria-expanded",!1)})}createOpenClickHandler(e){return e=>{e.preventDefault(),this.scrollPositionBeforeOpeningModal=window.scrollY;let t=e.currentTarget;t.setAttribute("aria-expanded",!0),this.setAttribute("aria-hidden",!1);this.querySelector("[modal-interface-content]").addEventListener("click",e=>e.stopPropagation());const i=this.querySelector("[modal-interface-close]"),o=this.querySelectorAll(".ui-modal__close");i&&i.addEventListener("click",()=>this.closeClickHandler(this,t)),o.forEach(e=>e.addEventListener("click",()=>this.closeClickHandler(this,t))),!this.classList.contains("ui-modal__lock")&&this.addEventListener("click",e=>{this===e.target&&this.closeClickHandler(this,t)}),this.classList.add("ui-modal--open"),this.makeOtherElementsInert(this),this.closeModalFn=()=>this.closeClickHandler(this,t),window.closeModal=this.closeModalFn,this.dataset.nofix&&("desktop"==this.dataset.nofix&&window.innerWidth>=1024||"mobile"==this.dataset.nofix&&window.innerWidth<=1024||"desktop-mobile"==this.dataset.nofix&&""!=this.dataset.nofix)?window.lenis?window.lenis.stop():document.body.classList.add("-scrollLock"):window.disableScroll(),this&&t&&this.focusOnOpen(this,t)}}createCloseClickHandler(){return(e,t)=>{if(this.classList.contains("ui-modal--open")){this.classList.remove("ui-modal--open"),this.setAttribute("aria-hidden",!0);this.querySelectorAll("video").forEach(e=>{e.pause()}),this.removeOtherElementsInert(),t.focus(),t.setAttribute("aria-expanded",!1),this.dataset.nofix&&("desktop"==this.dataset.nofix&&window.innerWidth>=1024||"mobile"==this.dataset.nofix&&window.innerWidth<=1024||"desktop-mobile"==this.dataset.nofix&&""!=this.dataset.nofix)?window.lenis&&window.lenis.__isStopped?window.lenis.start():document.body.classList.remove("-scrollLock"):(window.enableScroll(),window.scrollTo(0,this.scrollPositionBeforeOpeningModal)),this.closeModalFn=null,window.closeModal=null}}}smoothScrollTo(e,t,i){setTimeout(()=>{t&&t.scrollIntoView({behavior:"smooth",block:"start"})},100)}goToSection(e,t,i=null){let o,s=null;null!=i?(o=e.querySelector(`#${t}`),s=e.querySelectorAll("[tab-slider-menu]"),s.forEach(e=>{e.textContent.trim().split(" ").join("-").toLowerCase()==i.trim().split(" ").join("-").toLowerCase()&&e.click()}),o=e.querySelector(`#${t}`),this.smoothScrollTo(e,o,2)):(o=e.querySelector(`#${t}`),this.smoothScrollTo(e,o,2))}focusOnOpen(e,t){const i=this.getFocusableElements(e);i&&this.addEventListener("keydown",o=>this.handleKeyDown(o,e,i,t)),this.querySelector(".ui-modal__header-title")&&this.querySelector(".ui-modal__header").children[0]&&(this.querySelector(".ui-modal__header-title")||this.querySelector(".ui-modal__header").children[0]||i.first).focus()}handleKeyDown(e,t,i,o){const{first:s,last:l}=i;switch(e.key){case"Escape":e.preventDefault(),this.closeClickHandler(t,o);break;case"Tab":this.trapTabKey(e,s,l)}}getFocusableElements(e){const t=Array.from(this.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable], .ui-modal__header-title'));return{first:t[0],last:t[t.length-1]}}trapTabKey(e,t,i){e.shiftKey&&document.activeElement===t?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),t.focus())}makeOtherElementsInert(e){document.querySelectorAll("main").forEach(t=>{t!==e&&t.setAttribute("inert","true")})}removeOtherElementsInert(){document.querySelectorAll("[inert]").forEach(e=>e.removeAttribute("inert"))}connectedCallback(){this.openModalButtons.forEach(e=>{e.getAttribute("modal-name")===this.id&&e.addEventListener("click",this.openClickHandler)})}disconnectedCallback(){this.openModalButtons.forEach(e=>{e.getAttribute("modal-name")===this.id&&e.removeEventListener("click",this.openClickHandler)})}}customElements.define("modal-interface",ModalInterface);