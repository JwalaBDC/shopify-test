class ImageManager{static deviceType=ImageManager.getDeviceType();static isResizing=!1;static imgList=[];static errorImgPath="assets/common/images/empty.webp";static init(){this.loadImagesToDOMParallely(this.getImgList()),this.addResizeListener()}static reinit(){this.deviceType=this.getDeviceType(),this.loadImagesToDOMParallely(this.getImgList())}static getDeviceType(){return window.innerWidth<768?"mobile":"desktop"}static getImgList(){const e=document.querySelectorAll("[data-image]");if(this.imgList=[...e].filter(e=>e.dataset.commonSrc?(e.dataset.src=e.dataset.commonSrc,!0):e.dataset.mobileSrc&&"mobile"===this.deviceType?(e.dataset.src=e.dataset.mobileSrc,!0):!(!e.dataset.desktopSrc||"desktop"!==this.deviceType)&&(e.dataset.src=e.dataset.desktopSrc,!0)),!this.imgList.length){const e=new Image;return e.dataset.src=this.errorImgPath,[e]}return this.imgList}static loadImagesToDOMParallely(e,t=0){if(!e.length||window.cancelImageLoading)return;if(t>=e.length)return void console.log("::all images loaded::");const s=e[t],i=new Image;i.src=s.dataset.src,i.onload=()=>{s.classList.add("is-loaded"),"IMG"===s.tagName?s.src=i.src:s.style.backgroundImage=`url(${i.src})`},i.onerror=()=>{i.src=this.errorImgPath},this.loadImagesToDOMParallely(e,t+1)}static onResize(){this.reinit()}static addResizeListener(){window.addEventListener("resize",()=>{clearTimeout(this.isResizing),this.isResizing=setTimeout(()=>{const e=this.getDeviceType();this.deviceType!==e&&(this.deviceType=e,this.onResize())},250)})}}export default ImageManager;